CHANGELOG
=========


v0.4.1 (unreleased)
---------------------------

New Features:

  - Gear Inventory Tabs: Tab changes in the gear inventory menu are now
    announced via screen reader (e.g. "Equip", "Upgrade", "Salvage").

Bug Fixes:

  - Fixed settings selectors (display, screen mode, resolution, language,
    anti-aliasing) not announcing their new values when changed with
    left/right arrows. Replaced per-selector patches with generic
    StepSelectorBase.IncreaseIndex/DecreaseIndex patches that work
    reliably in IL2CPP.

  - Fixed VSync and Target Framerate toggles not announcing their On/Off
    state when pressed. These plain Unity Toggles can't be patched
    directly, so the SettingsFocusTracker now detects toggle value changes
    by comparing isOn state each frame.

  - Fixed "Equipped" being announced at game startup when the gear
    inventory form briefly initializes its default tab.


v0.4.0 - February 12, 2026
---------------------------

New Features:

  - Enemy Proximity Announcements: Screen reader now announces dangerous enemies
    with priority-based alerts:
      * "Explosive very close!" / "Boss very close!" / "Elite very close!" at < 8m
      * "Explosive nearby" / "Boss nearby" / "Elite nearby" at < 20m
      * "Enemy nearby" / "X enemies nearby" when enemies first enter range

  - Collectible Proximity Announcements: Screen reader announces items with
    direction as you approach them, using distance-based zone transitions:
      * "Red Sugar nearby up-right" → "Red Sugar closer left" → "Red Sugar very close down"
      * 8 directions adapted for top-down perspective (up/down/left/right + diagonals)
      * Announces on zone transitions (getting closer), resets when item is picked up

Improvements:

  - Collectible Detection Range: Significantly increased detection distances for
    all collectible categories to help find items from further away:
      * Red Sugar: 15m → 30m
      * Gear Drop: 18m → 40m
      * Buff Pickup: 12m → 25m
      * Currency: 13m → 28m
      * Mineral Vein: 13m → 28m
      * Loot Crate: 18m → 40m

  - Enemy Detection Range: Reduced from 50m to 35m for a more focused and less
    cluttered audio experience.

  - Drop Pod Pathfinding: Major improvements to close-range navigation:
      * NavMesh pathfinding now stays active until 3m (was disabled at 8m)
      * Direct targeting only used when line of sight is clear (raycast check)
      * Prevents getting stuck near the pod with walls blocking the path
      * Ramp tone frequency no longer goes flat when playerPoint is far from ramp
      * Path recalculation interval reduced from 0.5s to 0.3s
      * Waypoint selection minimum distance reduced from 2m to 1.5m


v0.3.2 - February 12, 2026
---------------------------

New Features:

  - Gamepad Support: All mod-specific inputs now support both keyboard and gamepad.
      * D-Pad Up/Down: navigate custom menus (end screen, milestones, audio cues)
      * A button: confirm/activate
      * B button: close/back
      * Y button: toggle audio cue preview menu
      * LB: read HP
      * RB: read wallet balance
      * L3 (left stick press): compass direction to drop pod

  - Gear Upgrade Feedback: Screen reader now announces "Upgraded [gear name]"
    when upgrading gear in the gear inventory.

  - Gear Salvage Feedback: Screen reader now announces "Salvaged [gear name]"
    when salvaging/selling gear.

Bug Fixes:

  - Fixed antialiasing setting not announcing its value when changed in the
    video settings menu. Was passing null instead of the display text field.

  - Fixed gear equip/unequip feedback ("Equipped X" / "Unequipped X") being
    immediately overwritten by the next button's announcement when the UI
    shifts focus after the action. Action feedback now queues the following
    button announcement instead of letting it interrupt.


v0.3.1 - February 11, 2026
---------------------------

New Features:

  - Locked Class Requirements: Locked classes now announce the player rank
    required to unlock them (e.g. "Engineer, Locked. Unlocks at player rank 3").

  - HP in Shop: Press H in the shop screen to hear your current HP, helping
    decide whether to spend on healing.

Improvements:

  - Drop Pod Guidance Overhaul:
      * Ramp guidance zone expanded from 2.5m to 5m for earlier interior guidance.
      * All audio (beacon beeps + continuous tone) now targets playerPoint (the
        exact departure trigger) instead of the ramp when in the guidance zone.
      * Ramp tone uses directional pitch modulation — higher and louder when
        facing the entry point, lower when facing away.
      * Added "very close" zone (< 1.5m from playerPoint) with peak audio
        intensity and "Almost inside, keep going" announcement.
      * F key compass reports direction and distance to playerPoint when in the
        guidance zone (e.g. "Pod entrance: up-right, 2 meters").
      * Announcements: "Drop pod very close" (8m) → "Near the pod, follow the
        tone inside" (5m) → "Almost inside, keep going" (1.5m) → "Inside the pod".

  - Supply Pod Volume: Increased supply pod beacon volume (0.20-0.38 → 0.28-0.48)
    so it stands out better among other audio cues.

  - Red Sugar Volume: Decreased red sugar audio volume (0.30-0.50 → 0.22-0.40)
    to reduce clutter.


v0.3.0 - February 11, 2026
---------------------------

New Features:

  - NavMesh Pathfinding: Drop pod beacon now uses Unity's NavMesh to calculate
    paths around walls and obstacles instead of pointing in a straight line.
    Beacon guides toward the next path waypoint. Falls back to direct targeting
    if path fails or within 8m of pod. Path recalculated every 0.5s.

  - Ramp Interior Guidance: When near the drop pod ramp (< 2.5m), a continuous
    tone pans toward the pod interior (playerPoint — the exact spot that triggers
    departure). Screen reader announces "On the ramp, follow the tone inside".

  - Directional Pitch Modulation: All spatial audio cues now sound higher-pitched
    when the target is ahead (W/up direction) and lower when behind (S/down).
    This helps distinguish forward from behind in the top-down perspective.
    Drop pod uses a pronounced 0.4x-1.0x range; all other cues use 0.6x-1.0x.

  - Supply Zone Guidance: Supply pod zones now announce enter/exit, activation
    state ("Clearing zone, X rocks to mine"), progress as rocks are mined,
    timer milestones every 10 seconds, and completion. Beacon stays active when
    activating and player is outside to guide them back.

  - Pickup Announcements: Screen reader now announces during gameplay:
      * Heals: "Healed X HP" (direct heals only, not regen or stat setup)
      * Currency: "X [currency name]" with cooldown to avoid spam
      * Gear: "Picked up [gear name]"
      * Loot crates: "[rarity] loot crate"

  - HP Reader: Press H during active gameplay to hear current and max HP
    (e.g. "HP: 85 / 120").

  - Shop Pin Toggles: Pin/lock buttons in the shop now announce
    "Pin [item name], Pinned/Unpinned" instead of generic toggle text.

  - Shop Price Buttons: Heal and Reroll buttons now read their label, price
    with currency name, and affordability (e.g. "Heal 50%. Price: 30 Gold").

Improvements:

  - Shop Wallet: Gold balance is now always shown when pressing G, even when
    zero (it's the primary shop currency). Previously only shown if > 0.

  - Shop Currency Names: Shop item prices now show the currency name
    (e.g. "50 Gold") instead of just the number.

  - Drop Pod Audio Cue Preview: Added 3 new previews to the Audio Cue Preview
    menu — Drop Pod Critical (close range double-beep) and Ramp Tone (continuous
    guidance tone near the ramp).

Bug Fixes:

  - Fixed "Max HP increased by 10" announcement on game start. Heal
    announcements now only fire for direct heals (EHealType.HEAL), not
    REGEN or MAX_HP which fire during stat initialization.

  - Fixed shop toggle labels showing "UISliderToggle, Off" or
    "Shop Button Group, Off" — now correctly identifies pin toggles
    and reads the associated item name.


v0.2.0 - February 11, 2026
---------------------------

New Features:

  - Collectible Audio Cues: 3D positional audio for 7 categories of collectible
    items during gameplay. Each category has a distinct sound and beeps faster as
    you get closer:
      * Red Sugar (health): Water-drop "bloop" with descending frequency sweep
      * Gear Drops (weapons/equipment): Rich two-tone chord
      * Buff Pickups (magnet, speed, berserk, etc.): Electric FM synthesis buzz
      * Currency (gold/minerals): Crystalline chime
      * Mineral Veins (mineable blocks): Metallic clink like a pickaxe on rock
      * Loot Crates (from elites/Huuli Hoarders): Shimmering sparkle
      * XP Orbs: Soft continuous triangle wave with tremolo (pitch = distance)

  - Objective Announcements: Mission objectives are now announced via screen reader.
    Objective text when it appears, progress updates (throttled to avoid spam), and
    completion announced with interrupt priority.

  - Unlock Screen Accessibility: When unlocking new weapons, artifacts, or masteries,
    the unlock name, stats, and description are now announced via screen reader.

  - Audio Cue Preview: 7 new collectible audio previews added to the Audio Cue
    Preview menu (Backspace).

Improvements:

  - Drop Pod Beacon: Completely redesigned sound. Now a metallic sonar ping with
    reverberant ring, clearly distinct from enemy beeps.

  - Supply Pod Beacon: Completely redesigned sound. Now a warbling trill with
    mechanical buzz, clearly distinct from both the drop pod and enemies.

  - XP Nearby Sound: Changed from pure sine wave to triangle wave with 6 Hz
    tremolo, so it no longer sounds like wall detection tones.

  - Sound Distinctiveness: All collectible, beacon, and enemy sounds now use
    fundamentally different synthesis techniques (FM synthesis, frequency sweeps,
    inharmonic overtones, detuned oscillators) to be easily distinguishable.

Bug Fixes:

  - Fixed unlock screen not reading unlock details (was patching Show() which fires
    before text is populated; now patches ShowMilestone() and ShowMastery() which
    fire after text is set).


v0.1.0 - February 10, 2026
---------------------------

Initial release with full menu accessibility, gameplay audio cues (walls, enemies,
beacons, hazards), and screen reader support for all game screens.
